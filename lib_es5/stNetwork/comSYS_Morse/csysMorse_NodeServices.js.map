{"version":3,"sources":["stNetwork/comSYS_Morse/csysMorse_NodeServices.js"],"names":[],"mappings":"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","file":"stNetwork/comSYS_Morse/csysMorse_NodeServices.js","sourcesContent":["\"use strict\";\r\n\r\n/**\r\n * COMSystem library\r\n * for role Node\r\n * \r\n * Provides communications system to ST network\r\n * \r\n * \r\n * v. Morse\r\n * \r\n * @ignore\r\n */\r\n\r\n\r\n/**\r\n * Import TBind_Morse_Node\r\n * @ignore\r\n */\r\nlet TBind_Morse_Node = require('./csysMorse_Node.js').CSYS_Morse_Node;\r\n\r\n/**\r\n * Import TBind_Morse_Service\r\n * @ignore\r\n */\r\nlet TBind_Morse_Service = require('./csysMorse_Services.js').TBind_Morse_Service;\r\n\r\n/**\r\n * Import COMSys_Morse_Service\r\n * @ignore\r\n */\r\nlet COMSys_Morse_Service = require('./csysMorse_Services.js').COMSys_Morse_Service;\r\n\r\n\r\n/**\r\n * Bind Service\r\n * Role Node\r\n * \r\n * @class\r\n * @implements {TBind_Morse_Service}\r\n */\r\nclass TBind_Morse_Srv_Node extends TBind_Morse_Service {\r\n\t\r\n\t/**\r\n\t * @constructs TBind_Morse_Srv_Node\r\n\t */\r\n\tconstructor(comSYS, tBind) {\r\n\t\t\r\n\t\tsuper(comSYS, tBind);\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Event Unbind\r\n\t */\r\n\t_event_Unbind(data) {\r\n\t\t\r\n\t\tlet service = this;\r\n\t\tlet tBind = service.tBind;\r\n\t\t\r\n\t\tlet comSYS = service.comSYS;\r\n\t\tlet _config = comSYS.config;\r\n\t\t\r\n\t\tlet socket = _config.controlChannel.socket;\r\n\t\t\r\n\t\tlet synchro = data.synchro;\r\n\t\tlet options = data.options;\r\n\t\t\r\n\t\t\r\n\t\tif (synchro) {\r\n\t\t\t\r\n\t\t\t// Send Message BindFree\r\n\t\t\tsocket.emit(comSYS.CONSTANTS.Messages.BindFree, \r\n\t\t\t\t{\r\n\t\t\t\t\t\"bindID\" : tBind.bindID,\r\n\t\t\t\t\t\"type\" : tBind.type\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\n\r\n/**\r\n * Communications System Service\r\n * Role Node\r\n * @class\r\n * @implements {COMSys_Morse_Service}\r\n */\r\nclass COMSys_Morse_Srv_Node extends COMSys_Morse_Service {\r\n\t\r\n\t/**\r\n\t * @construct COMSys_Morse_Srv_Node\r\n\t */\r\n\tconstructor(comSYS) {\r\n\t\t\r\n\t\tsuper(comSYS);\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Map control messages\r\n\t */\r\n\tmapControlMessages(socket) {\r\n\t\t\r\n\t\tsuper.mapControlMessages(socket);\r\n\t\t\r\n\t\t\r\n\t\tlet service = this;\r\n\t\t\r\n\t\tlet comSYS = service.comSYS;\r\n\t\tlet _config = comSYS.config;\r\n\t\t\r\n\t\tif (socket === undefined) {\r\n\t\t\tsocket = _config.controlChannel.socket;\r\n\t\t}\r\n\r\n\t\t\r\n\t\t// Map message createBind\r\n\t\tsocket.on(comSYS.CONSTANTS.Messages.createBind, function(msg){\r\n\t\t\tservice._msg_createBind(msg, socket, {\r\n\t\t\t\t\"bindID\" : msg.bindID,\r\n\t\t\t\t\"type\" : msg.type,\r\n\t\t\t\t\"source\" :  msg.source,\r\n\t\t\t\t\"target\" :  msg.target\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Event Bind_Added\r\n\t */\r\n\t_event_Bind_Added(data) {\r\n\t\t\r\n\t\tlet service = this;\r\n\t\t\r\n\t\tlet comSYS = service.comSYS;\r\n\t\tlet _config = comSYS.config;\r\n\t\t\r\n\t\tlet socket = _config.controlChannel.socket;\r\n\t\t\r\n\t\tlet synchro = data.synchro;\r\n\t\tlet bind = data.bind;\r\n\t\tlet options = data.options;\r\n\t\t\r\n\t\t\r\n\t\tif (synchro) {\r\n\t\t\t\r\n\t\t\t// Send Message Bind_Created\r\n\t\t\tsocket.emit(comSYS.CONSTANTS.Messages.Bind_Created, \r\n\t\t\t\t{\r\n\t\t\t\t\t\"bindID\" : bind.bindID,\r\n\t\t\t\t\t\"type\" : bind.type\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Message createBind\r\n\t */\r\n\t_msg_createBind(msg, socket, options) {\r\n\t\t\r\n\t\tlet service = this;\r\n\t\t\r\n\t\tlet comSYS = service.comSYS;\r\n\t\tlet _config = comSYS.config;\r\n\t\t\r\n\t\tlet type = options.type;\r\n\t\tlet source = options.source;\r\n\t\tlet target = options.target;\r\n\t\tlet _options = {\r\n\t\t\t\"bindID\" : options.bindID\r\n\t\t};\r\n\r\n\t\tconsole.log('<*> ST COMSys_Morse_Service._msg_createBind');\t// TODO REMOVE DEBUG LOG\r\n\r\n\t\tlet tbind = new TBind_Morse_Node(type, source, target, _options);\r\n\t\t\r\n\t\ttry {\r\n\t\t\ttbind.initialize();\r\n\t\t\tcomSYS.addBind(tbind);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('<EEE> ST COMSys_Morse_Service._msg_createBind');\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log(e);\t// TODO REMOVE DEBUG LOG\r\n\t\t\t\r\n\t\t\t// Notify Error\r\n\t\t\tservice.sendErrorInfo( socket, \"Net.Bind\", e, \r\n\t\t\t\t{ \r\n\t\t\t\t\t\"controlMSG\": comSYS.CONSTANTS.Messages.createBind, \r\n\t\t\t\t\t\"msg\": msg, \r\n\t\t\t\t\t\"options\": options \r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\r\n\r\nlet cysMorseSrv_Node_Lib = {\r\n\t\t\"TBind_Morse_Srv_Node\" : TBind_Morse_Srv_Node,\r\n\t\t\"COMSys_Morse_Srv_Node\" : COMSys_Morse_Srv_Node\r\n\t};\r\n\r\n\r\nmodule.exports = cysMorseSrv_Node_Lib;\r\n\t\r\n\t"],"sourceRoot":"C:\\Users\\Felipe\\Documents\\Work\\SomeThings\\dev\\NLVL_STNetwork\\es6"}