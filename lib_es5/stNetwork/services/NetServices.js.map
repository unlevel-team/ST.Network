{"version":3,"sources":["stNetwork/services/NetServices.js"],"names":[],"mappings":"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","file":"stNetwork/services/NetServices.js","sourcesContent":["\"use strict\";\r\n\r\n/*\r\n SomeThings Network services library\r\n\r\n*/\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Network service constants\r\n * \r\n * @memberof st.net.services\r\n */\r\nconst NETservices_CONSTANTS = {\r\n\t\t\r\n\t\"Messages\" : {\r\n\t\t\"getNetInfo\" : \"Get Net Info\",\r\n\t\t\"NetInfo\" : \"Net Info\",\r\n\t\t\r\n\t\t\r\n\t\t\"createDataChannel\" : \"Create DC\",\r\n\t\t\"DataChannelCreated\" : \"DC Created\",\r\n\t\t\r\n\t\t\"deleteDataChannel\" : \"Delete DC\",\r\n\t\t\"DataChannelDeleted\" : \"DC Deleted\",\r\n\t\t\r\n\t\t\r\n\t\t\"getDataChannelOptions\" : \"get DC Options\",\r\n\t\t\"DataChannelOptions\" : \"DC Options\",\r\n\t\t\r\n\t\t\"SetDCOptions\" : \"Set DC Options\",\r\n\t\t\"DCOptionsUpdated\" : \"DC Options Updated\",\r\n\t\t\r\n\t\t\"initDC\" : \"Init DC\",\r\n\t\t\"DCInitialized\" : \"DC Initialized\",\r\n\r\n\t\t\"closeDC\" : \"Close DC\",\r\n\t\t\"DCClosed\" : \"DC Closed\",\r\n\t\t\r\n\t\t\"startDataChannel\" : \"Start DC\",\r\n\t\t\"DataChannelStarted\" : \"DC started\",\r\n\t\t\r\n\t\t\"stopDataChannel\" : \"Stop DC\",\r\n\t\t\"DataChannelStopped\" : \"DC Stopped\"\r\n\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\"Events\" : {\r\n\t\t\"DataChannelCreated\" : \"DC Created\"\r\n\r\n\t}\r\n\t\r\n};\r\n\r\n\r\n\r\n/**\r\n * The stURI_DATA_Param object.\r\n * \r\n * @typedef {Object} stURI_DATA_Param\r\n * @memberof st.net.services\r\n * @type Object\r\n * \r\n * @property {string} name - Name\r\n * @property {string} value - Value\r\n * \r\n */\r\n\r\n\r\n/**\r\n * The stURI_DATA object.\r\n * \r\n * @typedef {Object} stURI_DATA\r\n * @memberof st.net.services\r\n * @type Object\r\n * \r\n * @property {string} stURI - The ST URI parsed\r\n * @property {string} schema - URI schema\r\n * @property {string} context - URI context\r\n * @property {string} action - URI action\r\n * @property {st.net.services.stURI_DATA_Param[]} params - URI parameters objects\r\n * \r\n */\r\n\r\n\r\n/**\r\n * \r\n * \r\n * @class\r\n * \r\n * @memberof st.net.services\r\n * \r\n * @property {string} stURI - The ST URI parsed\r\n * @property {string} schema - URI schema\r\n * @property {string} context - URI context\r\n * @property {string} action - URI action\r\n * @property {st.net.services.stURI_DATA_Param[]} params - URI parameters objects\r\n * \r\n */\r\nclass ST_URI {\r\n\t\r\n\t/**\r\n\t * \r\n\t * @constructs ST_URI\r\n\t * \r\n\t * @param {object} [options] - Options object\r\n\t * @param {st.net.services.stURI_DATA} [options.stURI_DATA] - ST URI DATA object\r\n\t * \r\n\t */\r\n\tconstructor(options) {\r\n\t\t\r\n\t\tif (options === undefined ||\r\n\t\t\t\toptions === null) {\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\tlet stURI = this;\r\n\t\tstURI.stURI = null;\r\n\t\tstURI.schema = null;\r\n\t\tstURI.context = null;\r\n\t\tstURI.action = null;\r\n\t\tstURI.params = [];\r\n\t\t\r\n\t\t\r\n\t\tif (options.stURI_DATA !== undefined) {\r\n\t\t\t\r\n\t\t\tlet uriDATA = options.stURI_DATA;\r\n\t\t\t\r\n\t\t\tstURI.stURI = uriDATA.stURI;\r\n\t\t\tstURI.schema = uriDATA.schema;\r\n\t\t\tstURI.context = uriDATA.context;\r\n\t\t\tstURI.action = uriDATA.action;\r\n\t\t\tstURI.params = uriDATA.params;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Get parameter by name\r\n\t * \r\n\t * @param {string} name -  Name of parameter\r\n\t * @param {object} [options] -  Options object\r\n\t * @param {st.net.services.ST_URI} [options.stURI] - ST_URI object\r\n\t * \r\n\t * @return {object} result - Result\r\n\t * @property {st.net.services.stURI_DATA_Param|null} result.param - The parameter\r\n\t * @property {number} result.position - Position of the result\r\n\t * \r\n\t */\r\n\tgetParameterByName(name, options) {\r\n\t\t\r\n\t\tlet stURI = this;\r\n\t\t\r\n\t\tif (options === undefined ||\r\n\t\t\t\toptions === null) {\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (options.stURI !== undefined) {\r\n\t\t\tstURI = options.stURI;\r\n\t\t}\r\n\t\t\r\n\t\tlet param = null;\r\n\t\tlet _i = -1;\r\n\t\t\r\n\t\t_i = stURI.params.map(function(x) {return x.name; }).indexOf(name);\r\n\r\n\t\tif (_i !== -1) {\r\n\t\t\tparam = stURI.params[_i];\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"param\": param,\r\n\t\t\t\"position\": _i\r\n\t\t};\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n/**\r\n * NET services library\r\n * \r\n * @namespace NETservices_Lib\r\n * @memberof st.net.services\r\n * \r\n */\r\nlet NETservices_Lib = {\r\n\t\t\r\n\t\t\r\n\t/**\r\n\t * Parses ST URI\r\n\t * \r\n\t * <pre>\r\n\t * \r\n\t * -- scheme:context:body\r\n\t * \r\n\t * st:engines:config/[type=file][path=./stSensors/stSensor_Keyboard.js]\r\n\t * st:engines:config/[type=module][moduleName=st.engines][method=sensors.getSensor_Dummy01]\r\n\t * st:engines:config/[type=module][moduleName=my.module][method=getMySensor]\r\n\t * \r\n\t * -- regex filter for body params ^\\[(\\s+\\S+)*\\]$\r\n\t * -- (^\\[(\\s+\\S+)*\\]$)*\r\n\t * -- (?:\\[.+\\])\r\n\t * \r\n\t * \r\n\t * </pre>\r\n\t * \r\n\t * @memberof st.net.services.NETservices_Lib\r\n\t * \r\n\t * @param {string} stURI - The ST URI string\r\n\t * @param {object} options - Options object.\r\n\t * \r\n\t * @returns {st.net.services.stURI_DATA}\r\n\t * @throws Exceptions\r\n\t * \r\n\t */\r\n\t\"parse_stURI\": function (stURI, options) {\r\n\t\t\r\n\t\tif (options === undefined ||\r\n\t\t\t\toptions === null) {\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tlet _URIpieces = stURI.split(':');\r\n\t\tlet _URIschema = _URIpieces[0];\r\n\t\t\r\n\t\tif (_URIschema !== 'st') {\r\n\t\t\tthrow \"Bad URI\";\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log('<~i~> NETservices_Lib.parse_stURI');\t// TODO REMOVE DEBUG LOG\r\n\t\tconsole.log(' <~> _URIpieces');\t// TODO REMOVE DEBUG LOG\r\n\t\tconsole.log(_URIpieces);\t// TODO REMOVE DEBUG LOG\r\n\t\tconsole.log(' <~> _URIschemma');\t// TODO REMOVE DEBUG LOG\r\n\t\tconsole.log(_URIschema);\t// TODO REMOVE DEBUG LOG\r\n\t\t\r\n\t\t\r\n\t\tlet _URIcontext = _URIpieces[1];\r\n\t\tlet _URIbody = stURI.substr(_URIschema.length + _URIcontext.length + 1);\r\n\t\t\r\n\t\tlet _BODYaction = _URIbody.substring(\r\n\t\t\t\t1, \r\n\t\t\t\t_URIbody.indexOf('/') );\r\n\t\t\r\n\t\tlet _BODYparams = _URIbody.substring( _URIbody.indexOf('/') + 1 );\r\n\t\t\r\n\t\t\r\n\t\tlet _params = _BODYparams.split(']');\t// Split for parameters\r\n\t\tlet _paramsFiltered = [];\r\n\t\t\r\n\t\t_paramsFiltered = _params.filter(function(_param, _i) {\t\t// Filter parameters \r\n\t\t\t\r\n\t\t\tif (_param[0] === '[') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tlet params = [];\r\n\t\t_paramsFiltered.forEach(function(_param, _i) {\t\t// Add parameters\r\n\t\t\t\r\n\t\t\tlet param = {};\r\n\t\t\tparam.name = _param.substring( 1, _param.indexOf('=') );\r\n\t\t\tparam.value = _param.substring( _param.indexOf('=') + 1 );\r\n\t\t\tparams.push(param);\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tlet stURI_DATA = {\r\n\t\t\t\t\r\n\t\t\t\"stURI\": stURI,\r\n\t\t\t\"schema\": _URIschema,\r\n\t\t\t\"context\": _URIcontext,\r\n\t\t\t\"action\": _BODYaction,\r\n\t\t\t\"params\": params\r\n\t\t};\r\n\t\t\r\n\t\treturn stURI_DATA;\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\t\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet _lib = {\r\n\t\t\r\n\t\"NETservices_CONSTANTS\": NETservices_CONSTANTS,\r\n\t\"NETservices_Lib\": NETservices_Lib\r\n\t\t\r\n};\r\n\r\n\r\n\r\nmodule.exports = _lib;"],"sourceRoot":"C:\\Users\\Felipe\\Documents\\Work\\SomeThings\\dev\\NLVL_STNetwork\\es6"}